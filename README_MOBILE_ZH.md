# Supabase Expo ç§»åŠ¨æ¨¡æ¿

ä½ å¥½ï¼Œæˆ‘å« Adam (Razikus) - æˆ‘æ­£åœ¨å­¦ä¹ ä¸­æ–‡ï¼Œä½†è¿™ä¸ª README å·²è¢«ç¿»è¯‘ã€‚å¦‚æœä½ å‘ç°é”™è¯¯ - è¯·æŠ¥å‘Šï¼

ä¸€ä¸ªç”Ÿäº§å°±ç»ªçš„ç§»åŠ¨ SaaS æ¨¡æ¿ï¼Œä½¿ç”¨ React Nativeã€Expo å’Œ Supabase æ„å»ºã€‚æ­¤æ¨¡æ¿æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ç§»åŠ¨åº”ç”¨ç¨‹åºï¼Œå…·æœ‰èº«ä»½éªŒè¯ã€æ–‡ä»¶ç®¡ç†ã€ä»»åŠ¡ç®¡ç†å’Œå›½é™…åŒ–æ”¯æŒã€‚


## Video
[![è§‚çœ‹è§†é¢‘](https://img.youtube.com/vi/qcASa0Ywsy4/maxresdefault.jpg)](https://youtube.com/shorts/qcASa0Ywsy4?feature=share)



## ğŸ“± å¹³å°æ”¯æŒ

- **iOS** - å®Œæ•´åŸç”Ÿæ”¯æŒ
- **Android** - å®Œæ•´åŸç”Ÿæ”¯æŒ
- **å…±äº«åç«¯** - ç”± Supabase é©±åŠ¨

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### èº«ä»½éªŒè¯
- é‚®ç®±/å¯†ç èº«ä»½éªŒè¯
- å¤šå› ç´ èº«ä»½éªŒè¯ï¼ˆMFA/2FAï¼‰ä¸ TOTP
- ç”¨äºèº«ä»½éªŒè¯å™¨åº”ç”¨çš„äºŒç»´ç æ³¨å†Œ
- é€šè¿‡é‚®ä»¶é‡ç½®å¯†ç 
- é‚®ç®±éªŒè¯
- å¯†ç é‡ç½®çš„æ·±åº¦é“¾æ¥å¤„ç†
- æŒä¹…ä¼šè¯

### ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·é…ç½®æ–‡ä»¶æ˜¾ç¤º
- å¯†ç æ›´æ”¹åŠŸèƒ½
- MFA è®¾å¤‡ç®¡ç†
- å¤š MFA è®¾å¤‡æ”¯æŒ
- ç”¨æˆ·è®¾ç½®å’Œåå¥½

### æ–‡ä»¶ç®¡ç†ï¼ˆ2FA ä¿æŠ¤ï¼‰
- ä½¿ç”¨æ–‡æ¡£é€‰æ‹©å™¨å®‰å…¨ä¸Šä¼ æ–‡ä»¶
- æ‹–æ”¾æ”¯æŒ
- å…·æœ‰æ—¶é—´é™åˆ¶ URL çš„æ–‡ä»¶å…±äº«
- æ–‡ä»¶ä¸‹è½½
- å¸¦ç¡®è®¤çš„æ–‡ä»¶åˆ é™¤
- è¿›åº¦æŒ‡ç¤ºå™¨
- æœ€å¤§æ–‡ä»¶å¤§å°ï¼š50MB

### ä»»åŠ¡ç®¡ç†ï¼ˆ2FA ä¿æŠ¤ï¼‰
- åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ä»»åŠ¡
- ä»»åŠ¡è¿‡æ»¤ï¼ˆå…¨éƒ¨/æ´»åŠ¨/å·²å®Œæˆï¼‰
- æ ‡è®°ä»»åŠ¡ä¸ºç´§æ€¥
- æ ‡è®°ä»»åŠ¡ä¸ºå®Œæˆ
- ä»»åŠ¡æè¿°
- å®æ—¶æ›´æ–°
- è¡Œçº§å®‰å…¨æ€§

### å›½é™…åŒ–ï¼ˆi18nï¼‰
- **æ”¯æŒçš„è¯­è¨€ï¼š**
  - è‹±è¯­ï¼ˆenï¼‰
  - æ³¢å…°è¯­ï¼ˆplï¼‰
  - ç®€ä½“ä¸­æ–‡ï¼ˆzhï¼‰
- è‡ªåŠ¨è®¾å¤‡è¯­è¨€æ£€æµ‹
- åº”ç”¨å†…è¯­è¨€åˆ‡æ¢
- æŒä¹…è¯­è¨€åå¥½
- ç™»å½•/æ³¨å†Œå±å¹•ä¸Šçš„è¯­è¨€é€‰æ‹©å™¨
- æ‰€æœ‰å±å¹•å®Œå…¨ç¿»è¯‘

### UI/UX
- å¸¦å›¾æ ‡çš„é€‰é¡¹å¡å¼å¯¼èˆª
- æ‰€æœ‰è®¾å¤‡çš„å®‰å…¨åŒºåŸŸæ”¯æŒ
- åŠ è½½çŠ¶æ€å’Œæ—‹è½¬å™¨
- å¸¦è­¦æŠ¥çš„é”™è¯¯å¤„ç†
- æˆåŠŸé€šçŸ¥
- åŸç”Ÿæ¨¡æ€å¯¹è¯æ¡†
- ä¸»é¢˜è‰²å½©æ–¹æ¡ˆ
- å“åº”å¼å¸ƒå±€

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒ
- **React Native** 0.81.4
- **Expo SDK** 54
- **React** 19.1.0

### å¯¼èˆªå’Œè·¯ç”±
- **Expo Router** 6.0.8ï¼ˆåŸºäºæ–‡ä»¶çš„è·¯ç”±ï¼‰
- **React Navigation**ï¼ˆåº•éƒ¨é€‰é¡¹å¡ï¼‰

### åç«¯
- **Supabase**ï¼ˆèº«ä»½éªŒè¯ã€æ•°æ®åº“ã€å­˜å‚¨ï¼‰
- **@supabase/supabase-js** 2.58.0

### UI ç»„ä»¶
- **Lucide React Native**ï¼ˆå›¾æ ‡ï¼‰
- **React Native QRCode SVG**ï¼ˆMFA äºŒç»´ç ï¼‰
- **React Native Safe Area Context**

### å›½é™…åŒ–
- **i18next** 25.5.2
- **react-i18next** 16.0.0
- **expo-localization** 17.0.7

### æ–‡ä»¶å’Œå­˜å‚¨
- **Expo Document Picker** 14.0.7
- **Expo Clipboard** 8.0.7
- **Expo Sharing** 14.0.7
- **Expo Web Browser** 15.0.7

### çŠ¶æ€ç®¡ç†
- React hooksï¼ˆuseStateã€useEffectã€useContextï¼‰
- ç”¨äºæŒä¹…å­˜å‚¨çš„ AsyncStorage

## ğŸ“¦ å¼€å§‹ä½¿ç”¨

### å‰ææ¡ä»¶

- Node.js 18+
- Yarn æˆ– npm
- Expo CLI
- iOS æ¨¡æ‹Ÿå™¨ï¼ˆMacï¼‰æˆ– Android æ¨¡æ‹Ÿå™¨
- Supabase é¡¹ç›®

### 1. åç«¯è®¾ç½®

é¦–å…ˆï¼ŒæŒ‰ç…§ä¸»ä»“åº“ README è®¾ç½®ä½ çš„ Supabase åç«¯ã€‚ä½ éœ€è¦ï¼š
- Supabase é¡¹ç›® URL
- Supabase Anon å¯†é’¥
- å·²åº”ç”¨è¿ç§»
- å·²é…ç½®å­˜å‚¨æ¡¶
- å·²å¯ç”¨ RLS ç­–ç•¥

### 2. å®‰è£…ä¾èµ–

```bash
cd supabase-expo-template
yarn install
```

### 3. é…ç½®ç¯å¢ƒ

åœ¨æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª `.env` æ–‡ä»¶ï¼š

```env
EXPO_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
```

### 4. é…ç½®åº”ç”¨è®¾ç½®

ç¼–è¾‘ `app.json`ï¼š

```json
{
  "expo": {
    "name": "ä½ çš„åº”ç”¨åç§°",
    "slug": "your-app-slug",
    "scheme": "yourappscheme",
    "ios": {
      "bundleIdentifier": "com.yourcompany.yourapp"
    },
    "android": {
      "package": "com.yourcompany.yourapp"
    }
  }
}
```

**é‡è¦ï¼š** `scheme` å€¼ç”¨äºæ·±åº¦é“¾æ¥ï¼ˆå¯†ç é‡ç½®ï¼‰ã€‚å°†å…¶æ›´æ–°ä¸ºä¸ä½ çš„åº”ç”¨åŒ¹é…ã€‚

### 5. é…ç½® Supabase é‡å®šå‘ URL

åœ¨ä½ çš„ Supabase ä»ªè¡¨æ¿ä¸­ï¼Œæ·»åŠ è¿™äº›é‡å®šå‘ URLï¼š
- `yourappscheme://reset-password`ï¼ˆæ›¿æ¢ä¸ºä½ çš„å®é™… schemeï¼‰

æˆ–æ›´æ–° `supabase/config.toml`ï¼š

```toml
[auth]
additional_redirect_urls = ["yourappscheme://reset-password"]
```

### 6. è¿è¡Œåº”ç”¨

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npx expo start

# åœ¨ iOS æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œ
npx expo run:ios

# åœ¨ Android æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œ
npx expo run:android

# æˆ–ä½¿ç”¨ Expo Go åº”ç”¨æ‰«æäºŒç»´ç 
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
supabase-expo-template/
â”œâ”€â”€ app/                          # åº”ç”¨å±å¹•ï¼ˆExpo Routerï¼‰
â”‚   â”œâ”€â”€ (app)/                    # å·²è®¤è¯çš„åº”ç”¨å±å¹•
â”‚   â”‚   â”œâ”€â”€ _layout.tsx          # é€‰é¡¹å¡å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ index.tsx            # ä¸»å±å¹•
â”‚   â”‚   â”œâ”€â”€ settings.tsx         # è®¾ç½®å±å¹•
â”‚   â”‚   â”œâ”€â”€ storage.tsx          # æ–‡ä»¶ç®¡ç†
â”‚   â”‚   â””â”€â”€ tasks.tsx            # ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ (auth)/                   # èº«ä»½éªŒè¯å±å¹•
â”‚   â”‚   â”œâ”€â”€ _layout.tsx          # è®¤è¯å †æ ˆå¸ƒå±€
â”‚   â”‚   â”œâ”€â”€ login.tsx            # ç™»å½•å±å¹•
â”‚   â”‚   â”œâ”€â”€ register.tsx         # æ³¨å†Œå±å¹•
â”‚   â”‚   â”œâ”€â”€ forgot-password.tsx  # å¯†ç é‡ç½®è¯·æ±‚
â”‚   â”‚   â”œâ”€â”€ reset-password.tsx   # å¯†ç é‡ç½®è¡¨å•
â”‚   â”‚   â”œâ”€â”€ two-factor.tsx       # 2FA éªŒè¯
â”‚   â”‚   â””â”€â”€ verify-email.tsx     # é‚®ç®±éªŒè¯
â”‚   â”œâ”€â”€ _layout.tsx              # æ ¹å¸ƒå±€
â”‚   â””â”€â”€ index.tsx                # åˆå§‹è·¯ç”±
â”œâ”€â”€ components/                   # å¯é‡ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ MFASetup.tsx             # MFA æ³¨å†Œç»„ä»¶
â”‚   â””â”€â”€ ui/                       # UI ç»„ä»¶
â”‚       â”œâ”€â”€ alert.tsx
â”‚       â”œâ”€â”€ button.tsx
â”‚       â”œâ”€â”€ card.tsx
â”‚       â””â”€â”€ input.tsx
â”œâ”€â”€ constants/
â”‚   â””â”€â”€ theme.ts                  # ä¸»é¢˜é¢œè‰²
â”œâ”€â”€ hooks/                        # è‡ªå®šä¹‰ hooks
â”‚   â””â”€â”€ use-color-scheme.ts
â”œâ”€â”€ lib/                          # å·¥å…·ç±»
â”‚   â”œâ”€â”€ i18n.ts                  # i18n é…ç½®
â”‚   â”œâ”€â”€ storage.ts               # AsyncStorage åŒ…è£…å™¨
â”‚   â”œâ”€â”€ supabase.ts              # Supabase å®¢æˆ·ç«¯
â”‚   â””â”€â”€ types.ts                 # TypeScript ç±»å‹
â”œâ”€â”€ locales/                      # ç¿»è¯‘æ–‡ä»¶
â”‚   â”œâ”€â”€ en.json                  # è‹±è¯­
â”‚   â”œâ”€â”€ pl.json                  # æ³¢å…°è¯­
â”‚   â””â”€â”€ zh.json                  # ä¸­æ–‡
â”œâ”€â”€ app.json                      # Expo é…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

## ğŸ” èº«ä»½éªŒè¯æµç¨‹

### ç™»å½•æµç¨‹
1. ç”¨æˆ·è¾“å…¥é‚®ç®±å’Œå¯†ç 
2. åº”ç”¨æ£€æŸ¥ MFA è¦æ±‚
3. å¦‚æœå¯ç”¨äº† MFA â†’ é‡å®šå‘åˆ° 2FA å±å¹•
4. å¦‚æœæ²¡æœ‰ MFA â†’ é‡å®šå‘åˆ°åº”ç”¨

### æ³¨å†Œæµç¨‹
1. ç”¨æˆ·è¾“å…¥é‚®ç®±å’Œå¯†ç 
2. ç”¨æˆ·æ¥å—æœåŠ¡æ¡æ¬¾å’Œéšç§æ”¿ç­–ï¼ˆå¿…éœ€ï¼‰
3. åˆ›å»ºè´¦æˆ·
4. å‘é€é‚®ç®±éªŒè¯
5. ç”¨æˆ·é‡å®šå‘åˆ°éªŒè¯é‚®ç®±å±å¹•

### å¯†ç é‡ç½®æµç¨‹
1. ç”¨æˆ·è¯·æ±‚å¯†ç é‡ç½®
2. å‘é€åŒ…å«é‡ç½®é“¾æ¥çš„é‚®ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¤ç‰Œ
3. ç”¨æˆ·ç‚¹å‡»é“¾æ¥ï¼š`yourappscheme://reset-password#access_token=...&refresh_token=...`
4. åº”ç”¨åœ¨ `app/_layout.tsx` ä¸­æ‹¦æˆªæ·±åº¦é“¾æ¥
5. ä»å“ˆå¸Œç‰‡æ®µæå–ä»¤ç‰Œ
6. é€šè¿‡ `supabase.auth.setSession()` å»ºç«‹ä¼šè¯
7. ç”¨æˆ·é‡å®šå‘åˆ°é‡ç½®å¯†ç å±å¹•
8. è®¾ç½®æ–°å¯†ç 
9. é‡å®šå‘åˆ°åº”ç”¨

### MFA æ³¨å†Œæµç¨‹
1. ç”¨æˆ·å¯¼èˆªåˆ°è®¾ç½® â†’ MFA
2. ç”¨æˆ·æä¾›è®¾å¤‡åç§°
3. æ˜¾ç¤ºäºŒç»´ç 
4. ç”¨æˆ·ä½¿ç”¨èº«ä»½éªŒè¯å™¨åº”ç”¨æ‰«æï¼ˆGoogle Authenticatorã€Authy ç­‰ï¼‰
5. ç”¨æˆ·è¾“å…¥ 6 ä½æ•°å­—ä»£ç 
6. éªŒè¯å¹¶æ³¨å†Œå› å­
7. å¯ä»¥æ³¨å†Œå¤šä¸ªè®¾å¤‡

## ğŸŒ å›½é™…åŒ–

### æ·»åŠ æ–°è¯­è¨€

1. **åˆ›å»ºç¿»è¯‘æ–‡ä»¶ï¼š**
```bash
# åœ¨ locales/ ä¸­åˆ›å»ºæ–°æ–‡ä»¶
touch locales/es.json
```

2. **æ·»åŠ ç¿»è¯‘ï¼š**
```json
{
  "auth": {
    "login": "Iniciar sesiÃ³n",
    "register": "Registrarse",
    ...
  },
  ...
}
```

3. **åœ¨ `lib/i18n.ts` ä¸­å¯¼å…¥ï¼š**
```typescript
import es from '../locales/es.json'

i18n.use(initReactI18next).init({
  resources: {
    en: { translation: en },
    pl: { translation: pl },
    zh: { translation: zh },
    es: { translation: es }, // åœ¨è¿™é‡Œæ·»åŠ 
  },
  ...
})
```

4. **åœ¨è¯­è¨€é€‰æ‹©å™¨ UI ä¸­æ·»åŠ ** åœ¨ `app/(auth)/login.tsx` å’Œ `app/(auth)/register.tsx` ä¸­

### ç¿»è¯‘é”®ç»“æ„

```typescript
{
  "auth": { /* èº«ä»½éªŒè¯å±å¹• */ },
  "home": { /* ä¸»å±å¹• */ },
  "app": { /* åº”ç”¨å¯¼èˆª */ },
  "storage": { /* æ–‡ä»¶ç®¡ç† */ },
  "tasks": { /* ä»»åŠ¡ç®¡ç† */ },
  "mfa": { /* MFA å±å¹• */ },
  "settings": { /* è®¾ç½®å±å¹• */ }
}
```

## ğŸš€ æ„å»ºç”Ÿäº§ç‰ˆæœ¬

### iOS

```bash
# é…ç½® EAS
eas build:configure

# ä¸º iOS æ„å»º
eas build --platform ios --profile production

# æäº¤åˆ° App Store
eas submit --platform ios
```

### Android

```bash
# ä¸º Android æ„å»º
eas build --platform android --profile production

# æäº¤åˆ° Google Play
eas submit --platform android
```

### æ„å»ºé…ç½®æ–‡ä»¶

ç¼–è¾‘ `eas.json` ä»¥é…ç½®æ„å»ºé…ç½®æ–‡ä»¶ï¼š

```json
{
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal"
    },
    "preview": {
      "distribution": "internal"
    },
    "production": {}
  }
}
```

è¯¦æƒ…è¯·å‚é˜… [Expo EAS Build æ–‡æ¡£](https://docs.expo.dev/build/introduction/)ã€‚

## ğŸ¨ è‡ªå®šä¹‰

### é¢œè‰²å’Œä¸»é¢˜

ç¼–è¾‘ `constants/theme.ts`ï¼š

```typescript
export const Colors = {
  light: {
    text: '#11181C',
    background: '#fff',
    tint: '#0a7ea4', // ä¸»è‰²
    icon: '#687076',
  },
  dark: {
    text: '#ECEDEE',
    background: '#151718',
    tint: '#fff',
    icon: '#9BA1A6',
  },
};
```

### åº”ç”¨åç§°å’Œå“ç‰Œ

1. æ›´æ–° `app.json`ï¼š
```json
{
  "expo": {
    "name": "ä½ çš„åº”ç”¨åç§°",
    "icon": "./assets/images/icon.png",
    "splash": {
      "image": "./assets/images/splash-icon.png"
    }
  }
}
```

2. æ›¿æ¢ `assets/images/` ä¸­çš„å›¾æ ‡æ–‡ä»¶

### å¯¼èˆª

ç¼–è¾‘ `app/(app)/_layout.tsx` ä»¥è‡ªå®šä¹‰é€‰é¡¹å¡ï¼š

```typescript
<Tabs.Screen
  name="your-screen"
  options={{
    title: t('app.yourScreen'),
    tabBarIcon: ({ color, size }) => <YourIcon size={size} color={color} />,
  }}
/>
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·ï¼š
- éµå¾ªç°æœ‰ä»£ç é£æ ¼
- ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•
- æ›´æ–°æ–‡æ¡£
- åœ¨ iOS å’Œ Android ä¸Šæµ‹è¯•

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®æ ¹æ® Apache è®¸å¯è¯æˆæƒ - è¯¦è§ LICENSE æ–‡ä»¶ã€‚

## ğŸ’ª æ”¯æŒ

å¦‚æœä½ è§‰å¾—è¿™ä¸ªæ¨¡æ¿æœ‰å¸®åŠ©ï¼š
- ç»™å®ƒä¸€ä¸ªæ˜Ÿæ ‡ â­ï¸
- [ç»™æˆ‘ä¹°æ¯å’–å•¡](https://buymeacoffee.com/razikus)